(function(){"use strict";var e={3767:function(e,t,s){var r=s(6369),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("nav",[t("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"secondary"}},[t("b-container",{staticClass:"w-75",attrs:{fluid:""}},[t("b-navbar-brand",{attrs:{href:"#"}},[t("img",{staticClass:"bolls-logo",attrs:{src:"/img/logos/Bolls.png"}})]),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[t("b-nav-item",[t("router-link",{attrs:{to:"/"}},[e._v("Dashboard")])],1),t("b-nav-item",[t("router-link",{attrs:{to:"/instruments"}},[e._v("Instruments")])],1),t("b-nav-item",[t("router-link",{attrs:{to:"/templates"}},[e._v("Templates")])],1)],1),t("b-navbar-nav",{staticClass:"ml-auto"},[e.$store.state.isAuthenticated.responsible?t("b-nav-item",{staticClass:"notification-box"},[t("router-link",{attrs:{to:"/notifications"}},[t("i",{staticClass:"fa-solid fa-bell notification-bell"}),e.notifications.filter((e=>!1===e.hasReacted)).length>0?t("span",{staticClass:"badge-buble"},[e._v(e._s(e.notifications.filter((e=>!1===e.hasReacted)).length))]):e._e()])],1):e._e(),null!==e.$store.state.isAuthenticated&&e.$store.state.isAuthenticated.responsible?t("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("em",[e._v("User")])]},proxy:!0}],null,!1,4258386881)},[t("b-dropdown-item",[t("router-link",{staticStyle:{color:"#212529","font-weight":"200"},attrs:{to:"/settings"}},[e._v("Settings")])],1),e.$store.state.isAuthenticated.superUser?t("b-dropdown-item",[t("router-link",{staticStyle:{color:"#212529","font-weight":"200"},attrs:{to:"/super-user"}},[e._v("Super user")])],1):e._e(),t("b-dropdown-item",{attrs:{href:"#"},on:{click:e.signout}},[e._v("Sign Out")])],1):t("b-nav-item",[t("router-link",{attrs:{to:"/signin"}},[e._v("Sign In")])],1)],1)],1)],1)],1)],1),t("router-view")],1)},i=[],n=s(3822),o=s(4161);const l=o.Z.create({baseURL:"https://localhost:3000/api",timeout:15e3,withCredentials:!0});var c=l;const u={login(e,t){return c.post(`/authentication/${e}/${t}`)},logout(){return c["delete"]("/authentication")},checkAuthenticationcation(){return c.get("/authentication")}},d={getAll(){return c.get("notifications/by-user")},updateNotification(e){return c.put("notifications",e)}};var m={name:"App",created(){this.checkAuthentication()},data(){return{notifications:[]}},methods:{...(0,n.nv)(["checkAuthentication"]),signout(){u.logout().then((e=>window.location.href="/")).catch((e=>console.log(e)))}},mounted(){d.getAll().then((e=>this.notifications=e.data)).catch((e=>console.error(e)))}},p=m,h=s(1001),f=(0,h.Z)(p,a,i,!1,null,null,null),b=f.exports,g=s(5431);(0,g.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var v=s(2631);r["default"].use(n.ZP);var y=new n.ZP.Store({state:{isAuthenticated:{},isChecking:!0},getters:{},mutations:{setAuthenticated(e,t){e.isAuthenticated=t},setIsChecking(e,t){e.isChecking=t}},actions:{checkAuthentication({commit:e}){e("setIsChecking",!0),u.checkAuthenticationcation().then((t=>{e("setAuthenticated",t.data),e("setIsChecking",!1)})).catch((t=>{e("setAuthenticated",{responsible:!1,superUser:!1}),e("setIsChecking",!1)}))}},modules:{}}),x=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-start",attrs:{fluid:""}},[t("b-row",{staticClass:"mb-5"},[t("b-col",{staticClass:"pl-0 pr-0 mt-5",attrs:{sm:"12"}},[t("b-card",{staticClass:"shadow rounded col-sm-12"},[t("b-row",[t("b-col",{attrs:{sm:"12"}},[t("h2",[e._v("Overdue")])]),t("b-col",{staticClass:"w-100 d-flex justify-content-center",attrs:{sm:"4"}},[t("gauge-chart",{staticStyle:{width:"75%"},attrs:{"background-color":"#57E216","foreground-color":"#E51616",label:"Active",percentage:e.activePercentage}})],1),t("b-col",{staticClass:"w-100 d-flex justify-content-center",attrs:{sm:"4"}},[t("gauge-chart",{staticStyle:{width:"75%"},attrs:{"background-color":"#57E216","foreground-color":"#E51616",label:"External calibration",percentage:e.externalPercentage}})],1),t("b-col",{staticClass:"w-100 d-flex justify-content-center",attrs:{sm:"4"}},[t("gauge-chart",{staticStyle:{width:"75%"},attrs:{"background-color":"#57E216","foreground-color":"#E51616",label:"Internal calibration",percentage:e.internalPercentage}})],1)],1)],1)],1),t("b-col",{staticClass:"mt-5 pl-0",attrs:{sm:"6"}},[t("b-row",[t("b-col",{staticClass:"pr-0",attrs:{sm:"12"}},[t("b-card",{staticClass:"shadow-lg"},[t("h3",[e._v("Next calibration - overview")]),t("column-chart",{attrs:{columns:e.columnChartColumns,data:e.columnChartData,distributed:"",colors:["#e84118","#e84118","#fbc531","#00a8ff","#00a8ff","#4cd137","#4cd137"]}})],1)],1),t("b-col",{staticClass:"mt-3 pr-0",attrs:{sm:"12"}},[t("b-card",{staticClass:"shadow-lg"},[t("h4",[e._v("Instrument total value")]),t("common-table",{attrs:{fields:e.instrumentsTotalValueFields,items:e.instrumentsTotalValue,responsive:""}})],1)],1)],1)],1),t("b-col",{staticClass:"mt-5 pr-3",attrs:{sm:"6"}},[t("b-row",[t("b-col",{staticClass:"mt-0 pr-0",attrs:{sm:"12"}},[t("b-card",{staticClass:"shadow-lg"},[t("h5",[e._v("External clibration - within 3 months")]),t("common-table",{attrs:{fields:e.fields,items:e.externalCalibrationOverdue,pagination:"","page-sizes":[5],responsive:""}})],1)],1),t("b-col",{staticClass:"mt-3 pr-0",attrs:{sm:"12"}},[t("b-card",{staticClass:"shadow-lg"},[t("h5",[e._v("Internal clibration - within 1 month")]),t("common-table",{attrs:{fields:e.fields,items:e.internalCalibrationOverdue,pagination:"","page-sizes":[5],responsive:""}})],1)],1)],1)],1),t("b-col",{staticClass:"mt-5 pr-0 pb-0 pl-0",attrs:{sm:"6"}},[t("b-card",{staticClass:"shadow-lg"},[t("h3",[e._v("External calibration - overdue")]),t("common-table",{attrs:{fields:e.fields,items:e.externalCalibrationWithin3Months,pagination:"","page-sizes":[5],responsive:""}})],1)],1),t("b-col",{staticClass:"mt-5 pr-0 mb-5",attrs:{sm:"6"}},[t("b-card",{staticClass:"shadow-lg"},[t("h3",[e._v("Internal calibration - overdue")]),t("common-table",{attrs:{fields:e.fields,items:e.internalCalibrationWithin1Month,pagination:"","page-sizes":[5],responsive:""}})],1)],1)],1)],1)},w=[],C=function(){var e=this,t=e._self._c;return t("div",[t("apexchart",{attrs:{type:"radialBar",options:e.chartOptions,series:e.series}}),t("h3",[e._v(e._s(e.label))])],1)},k=[],$=s(3373),D=s.n($),_={components:{VueApexCharts:D()},props:{backgroundColor:"",foregroundColor:"",dash:0,label:"",percentage:{type:Number,default:0}},data(){return{}},methods:{},computed:{series(){return[this.percentage]},chartOptions(){return{chart:{type:"radialBar",offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-120,endAngle:120,track:{background:this.backgroundColor,strokeWidth:"100%",margin:5},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},stroke:{dashArray:this.dash},colors:[this.foregroundColor],label:this.label}}},mounted(){}},S=_,I=(0,h.Z)(S,C,k,!1,null,null,null),z=I.exports,N=function(){var e=this,t=e._self._c;return t("div",[e.filterProperties.length>0?t("div",{staticClass:"common-table-top-container w-100"},[e.filterProperties.length>0?t("b-row",{staticClass:"w-100"},[t("b-col",{attrs:{sm:"3"}},[t("b-form-group",{staticClass:"mb-0 text-left w-100 mt-1",attrs:{"label-cols-sm":"0","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"default",fn:function({ariaDescribedby:s}){return[t("b-form-checkbox-group",{staticClass:"mt-1 d-flex flex-row",attrs:{options:e.mapFilterdItemsKeys,"aria-describedby":s},model:{value:e.filterOn,callback:function(t){e.filterOn=t},expression:"filterOn"}})]}}],null,!1,1767429038)})],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-input",{attrs:{placeholder:"Search items..."},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.actionsField?t("b-col",{staticClass:"text-right",attrs:{sm:"3"}},e._l(e.actionsField.template.head,(function(s,r){return"filter"===s.section&&s.visible?t("b-button",{key:r,staticClass:"mt-1",attrs:{variant:"success",size:"sm"},on:{click:function(e){return s.action()}}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v(e._s(s.text))]),t("i",{staticClass:"fa-solid fa-plus"})]):e._e()})),1):e._e()],1):e._e()],1):e._e(),t("div",{class:e.background?"common-table-container":""},[t("b-table",{staticClass:"w-100",attrs:{striped:e.striped,bordered:e.bordered,borderless:e.borderless,outlined:e.outlined,small:e.small,hover:e.hover,dark:e.dark,fixed:e.fixed,responsive:e.resposive,"sticky-header":e.stickyHeader,stacked:e.stacked,"caption-top":e.captionTop,"table-variant":e.tableVariant,"head-variant":e.headVariant,"foot-variant":e.footVariant,"foot-clone":e.footClone,"no-footer-sorting":e.noFooterSorting,"no-border-collapse":e.noBorderCollapse,"thead-class":"text-left","tbody-class":"text-left","per-page":e.perPage,"current-page":e.currentPage,fields:e.fields,items:e.filterItems,"show-empty":"","sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"empty",fn:function(s){return[t("div",{staticClass:"my-0 text-center"},[t("span",[e._v("No items to display")])])]}},{key:"head(actions)",fn:function(s){return[s.field.template.head?t("div",{staticClass:"text-left",class:e.getPlacement(s.field.template.head[0].placement)},e._l(s.field.template.head,(function(r,a){return"table"===r.section&&r.visible?t("div",{key:a},[r.label?t("span",[e._v(e._s(r.label))]):t("b-button",{key:a,class:e.getPlacement(r.placement),staticStyle:{"margin-left":"5px"},attrs:{variant:r.variant,size:r.size},on:{click:function(e){return r.action(s.item)}}},[r.text?t("span",{staticStyle:{"margin-right":"7px"}},[e._v(e._s(r.text))]):e._e(),t("i",{staticClass:"fa-solid",class:r.icon})])],1):e._e()})),0):e._e()]}},e._l(e.fields,(function(s){return{key:`cell(${s.key})`,fn:function(r){return[r.item?t("div",[s.formatter?t("span",[e._v(e._s(s.formatter(r.item)))]):"boolean"===typeof r.item[s.key]?t("b-checkbox",{attrs:{switch:"",disabled:""},model:{value:r.item[s.key],callback:function(t){e.$set(r.item,s.key,t)},expression:"data.item[item.key]"}}):t("span",[e._v(e._s(r.item[s.key]))])],1):e._e()]}}})),{key:"cell(actions)",fn:function(s){return[t("div",{staticClass:"text-left",class:e.getPlacement(s.field.template.cell[0].placement)},e._l(s.field.template.cell,(function(r,a){return r.visible?t("b-button",{key:a,class:e.getPlacement(r.placement),staticStyle:{"margin-left":"5px"},attrs:{variant:r.variant,size:r.size},on:{click:function(e){return r.action(s.item)}}},[r.text?t("span",{staticStyle:{"margin-right":"7px"}},[e._v(e._s(r.text))]):e._e(),t("i",{staticClass:"fa-solid",class:r.icon})]):e._e()})),1)]}}],null,!0)}),t("b-row",{staticClass:"w-100",staticStyle:{"margin-bottom":"10px"}},[e.pagination?t("div",{staticClass:"d-flex justify-content-between align-items-center w-100"},[t("div",{staticClass:"d-flex align-items-center"},[t("b-button-group",{attrs:{size:"sm"}},e._l(e.pageSizes,(function(s,r){return t("b-button",{key:r,class:e.perPage===s?"active":"",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.changePageLimit(s)}}},[e._v(e._s(s))])})),1)],1),t("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"fill",size:"sm"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()])],1)])},F=[],M=(s(7658),{components:{},props:{pageSizes:{type:Array,default:()=>[10,25,50]},background:{type:Boolean,default:!1},defaultFilter:[],fields:Array,items:Array,filterProperties:{type:Array,default:()=>[]},striped:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},small:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},captionTop:{type:Boolean,default:!1},footClone:{type:Boolean,default:!1},noFooterSorting:{type:Boolean,default:!1},noBorderCollapse:{type:Boolean,default:!1},resposive:{type:[Boolean,String],default:!1},stickyHeader:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},tableVariant:{type:String,default:""},headVariant:{type:String,default:""},footVariant:{type:String,default:""},pagination:{type:Boolean,default:!1}},data(){return{filterOn:[],sortBy:"",sortDesc:!1,currentPage:0,perPage:this.pageSizes[0],filterItems:[],search:""}},methods:{getPlacement(e){return"left"===e?"text-left":"right"===e?"text-right":"text-center"},changePageLimit(e){this.perPage=e},filterItemsList(){let e=[];this.mapFilterdItemsKeys.forEach((t=>{e.push(this.items.filter((e=>t.condition(e)&&this.filterOn.includes(t.value))))}));let t=[];e.forEach((e=>{e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)}))})),t=this.sortInstruments(t),this.filterItems=t},filterSearch(){this.filterProperties.length>0?this.filterItemsList():this.filterItems=this.items;let e=Object.keys(this.filterItems[0]),t=new RegExp(this.search,"g");this.filterItems=this.filterItems.filter((s=>{for(let r=0;r<e.length;r++){let a=e[r];if(a.toLowerCase().includes("id"))continue;let i=s[a];if(null!=i&&i.toString().toLocaleLowerCase().includes(this.search.toLowerCase())||"number"==typeof i&&i.toString().match(t))return!0}return!1}))},sortInstruments(e){return e.sort((function(e,t){const s=parseInt(e.aNumber.match(/\d+/)[0]),r=parseInt(t.aNumber.match(/\d+/)[0]);return s===r?e.aNumber.localeCompare(t.aNumber,void 0,{numeric:!0,sensitivity:"base"}):s-r}))}},computed:{mapFilterdItemsKeys(){return this.filterProperties.map((e=>({condition:e.condition,value:e.value,text:e.label})))},checkedFilters(){return this.filterProperties.filter(((e,t)=>this.filterOn[t]))},totalRows(){return this.filterItems.length},actionsField(){let e=this.fields.find((e=>"actions"===e.key));return e}},mounted(){this.filterOn=this.defaultFilter,!0===this.pagination?this.perPage=this.pageSizes[0]:this.perPage=900719925474099},watch:{filterOn(){this.filterItemsList()},items(){this.filterProperties.length>0?this.filterItemsList():this.filterItems=this.items},search(){this.filterSearch()}}}),T=M,P=(0,h.Z)(T,N,F,!1,null,null,null),O=P.exports;const U={getAll(){return c.get("/instruments")},getImage(e){return c.get(`instruments/image/${e}`,{responseType:"blob"})},getByXMonths(e,t){return c.get(`/instruments/list/x-months/${e}/${t}`)},getOverdue(e){},createNewInstrument(e){return c.post("/instruments",e)},updateInstrument(e){return c.put("/instruments",e)},activateInstrument(e){return c.put("/instruments/inactive",e)},deleteInstrument(e){return c["delete"](`/instruments/inactive/${e}`)},actualDeleteInstrument(e){return c["delete"](`/instruments/${e}`)},uploadInstrumentImage(e,t){return console.log(t),console.log(e),c.post(`/instruments/${t}`,e,{headers:{"Content-Type":"multipart/form-data"}})}},A=["EMC","GEN","SAF","LIGHT","AUDIO","VIB","IP","LAB","AIR","LVD","OTHER"];var B=function(){var e=this,t=e._self._c;return t("apexchart",{staticStyle:{height:"100%"},attrs:{type:"bar",options:e.options,series:e.series}})},V=[],E={components:{VueApexCharts:D()},props:{distributed:{type:Boolean,default:()=>!1},colors:{type:Array,default:()=>["#00a8ff"]},columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}},data(){return{}},methods:{},computed:{series(){return[{data:this.data}]},options(){return{chart:{height:550,type:"bar",toolbar:{show:!1}},colors:this.colors,plotOptions:{bar:{columnWidth:"45%",distributed:this.distributed}},dataLabels:{enabled:!1},legend:{show:!1},xaxis:{categories:this.columns,labels:{style:{fontSize:"18px"}}}}}},mounted(){}},L=E,H=(0,h.Z)(L,B,V,!1,null,null,null),R=H.exports,q={components:{GaugeChart:z,ColumnChart:R,commonTable:O},props:{},data(){return{instruments:[],externalCalibration:[],internalCalibration:[],testTypes:A}},methods:{load(){U.getAll().then((e=>{this.instruments=e.data})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))}},computed:{columnChartColumns(){return["< -7","-7 - 0","1 - 7","8 - 14","15 - 30","31 - 45","46 - 90"]},instrumentsTotalValue(){let e=0,t=this.instruments.filter((e=>!e.inactive)).reduce(((e,t)=>e+t.value),e);e=0;let s=this.instruments.filter((e=>e.inactive)).reduce(((e,t)=>e+t.value),e);e=0;let r=this.instruments.reduce(((e,t)=>e+t.value),e);return[{name:"Active",value:t},{name:"Inactive",value:s},{name:"All",value:r}]},instrumentsTotalValueFields(){return[{key:"name",label:"Category"},{key:"value",label:"Total"}]},columnChartData(){if(this.instruments.length<=0)return null;let e=new Date,t=(new Date).setDate((new Date).getDate()-7);console.log(new Date(e).toLocaleString("en-GB",{timeZone:"Europe/Copenhagen"})),console.log((new Date).toLocaleString("en-GB",{timeZone:"Europe/Copenhagen"}));let s=this.instruments.filter((e=>new Date(e.nextCalibrationDate)<t&&e.needsCalibration&&!e.inactive)).length,r=this.instruments.filter((s=>s.needsCalibration&&!s.inactive&&new Date(s.nextCalibrationDate)>=t&&new Date(s.nextCalibrationDate)<=e)).length,a=(new Date).setDate((new Date).getDate()+1),i=(new Date).setDate((new Date).getDate()+7),n=this.instruments.filter((e=>e.needsCalibration&&!e.inactive&&new Date(e.nextCalibrationDate)>=a&&new Date(e.nextCalibrationDate)<=i)).length,o=(new Date).setDate((new Date).getDate()+8),l=(new Date).setDate((new Date).getDate()+14),c=this.instruments.filter((e=>e.needsCalibration&&!e.inactive&&new Date(e.nextCalibrationDate)>=o&&new Date(e.nextCalibrationDate)<=l)).length,u=(new Date).setDate((new Date).getDate()+15),d=(new Date).setDate((new Date).getDate()+30),m=this.instruments.filter((e=>e.needsCalibration&&!e.inactive&&new Date(e.nextCalibrationDate)>=u&&new Date(e.nextCalibrationDate)<=d)).length,p=(new Date).setDate((new Date).getDate()+31),h=(new Date).setDate((new Date).getDate()+45),f=this.instruments.filter((e=>e.needsCalibration&&!e.inactive&&e.externalCalibration&&new Date(e.nextCalibrationDate)>=p&&new Date(e.nextCalibrationDate)<=h)).length,b=(new Date).setDate((new Date).getDate()+46),g=(new Date).setDate((new Date).getDate()+90),v=this.instruments.filter((e=>e.needsCalibration&&!e.inactive&&e.externalCalibration&&new Date(e.nextCalibrationDate)>=b&&new Date(e.nextCalibrationDate)<=g)).length,y=[s,r,n,c,m,f,v];return console.log(y),y},fields(){return[{key:"aNumber",label:"A-Number",sortable:!0},{key:"instrumentName",label:"Instrument",sortable:!0},{key:"manufacturer",sortable:!0},{key:"test",formatter:e=>A[e.test],sortable:!0},{key:"type",sortable:!0}]},externalCalibrationWithin3Months(){let e=new Date,t=(new Date).setDate(e.getDate()+97);return this.instruments.filter((s=>new Date(s.nextCalibrationDate)>e&&new Date(s.nextCalibrationDate)<=t&&s.externalCalibration&&s.needsCalibration&&!s.inactive))},internalCalibrationWithin1Month(){let e=new Date,t=(new Date).setDate(e.getDate()+37);return this.instruments.filter((s=>new Date(s.nextCalibrationDate)>e&&new Date(s.nextCalibrationDate)<=t&&!s.externalCalibration&&s.needsCalibration&&!s.inactive))},externalCalibrationOverdue(){let e=new Date;return this.instruments.filter((t=>new Date(t.nextCalibrationDate)<=e&&t.externalCalibration&&t.needsCalibration&&!t.inactive))},internalCalibrationOverdue(){let e=new Date;return this.instruments.filter((t=>new Date(t.nextCalibrationDate)<=e&&!t.externalCalibration&&t.needsCalibration&&!t.inactive))},activePercentage(){let e=new Date,t=this.instruments.filter((t=>e>=new Date(t.nextCalibrationDate)&&!t.inactive&&t.needsCalibration)).length;return t>0?Number(((t+1e-4)/(this.instruments.filter((e=>e.needsCalibration&&!e.inactive)).length+1e-4)*100).toFixed(0)):0},externalPercentage(){let e=new Date,t=this.instruments.filter((t=>e>=new Date(t.nextCalibrationDate)&&t.externalCalibration&&!t.inactive&&t.needsCalibration)).length;return t>0?Number(((t+1e-5)/(this.instruments.filter((e=>e.externalCalibration&&e.needsCalibration&&!e.inactive)).length+1e-5)*100).toFixed(0)):0},internalPercentage(){let e=new Date,t=this.instruments.filter((t=>e>=new Date(t.nextCalibrationDate)&&!t.externalCalibration&&!t.inactive&&t.needsCalibration)).length;return t>0?Number((100*((t+1e-5)/this.instruments.filter((e=>!e.externalCalibration&&e.needsCalibration&&!e.inactive)).length+1e-5)).toFixed(0)):0}},mounted(){this.load()}},j=q,Z=(0,h.Z)(j,x,w,!1,null,null,null),Y=Z.exports,W=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-left",staticStyle:{"margin-bottom":"100px"},attrs:{fluid:""}},[t("h1",[e._v("Instruments")]),t("common-table",{attrs:{items:e.instruments,fields:e.fields,striped:"",hover:"",pagination:"","filter-properties":e.filterProperties,borderless:"","default-filter":["get_active"]}}),t("instrument-modal",{ref:"InstrumentModal"})],1)},G=[],X=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{centered:"",size:"xl"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("div",{staticClass:"text-right w-100 d-flex flex-row justify-content-between"},[e.instrument.inactive||"add"===e.purpose||"watch"===e.purpose?e._e():t("b-button",{attrs:{variant:"danger"},on:{click:e.actualDeleteInstrument}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Delete")]),t("i",{staticClass:"fa-solid fa-trash"})]),e.instrument.inactive||"add"===e.purpose||"watch"===e.purpose?"add"!==e.purpose&&"watch"!==e.purpose?t("b-button",{staticClass:"ml-auto",attrs:{variant:"primary"},on:{click:e.reactivateInstrument}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Make active")]),t("i",{staticClass:"fa-solid fa-circle-check"})]):e._e():t("b-button",{attrs:{variant:"warning"},on:{click:e.deleteInstrument}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Make inactive")]),t("i",{staticClass:"fa-solid fa-eye-slash"})])],1)]},proxy:!0},{key:"modal-footer",fn:function(){return["add"===e.purpose?t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.hide}},[e._v("Cancel")]),t("b-button",{attrs:{variant:"success",type:"submit"},on:{click:e.addInstrument}},[e._v("Add")])],1):"edit"===e.purpose?t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.hide}},[e._v("Cancel")]),t("b-button",{attrs:{variant:"success",type:"submit"},on:{click:e.updateInstrument}},[e._v("Update")])],1):"watch"===e.purpose?t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.hide}},[e._v("Close")])],1):e._e()]},proxy:!0}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("b-row",{staticStyle:{padding:"25px"}},[t("b-col",{attrs:{sm:"4"}},[t("b-row",[t("b-link",{staticClass:"w-100",attrs:{href:"#"},on:{click:e.browseFileClick}},[""!==e.instrument.image?t("div",{staticClass:"w-100"},[e.loadingImage?t("div",{staticStyle:{position:"relative"}},[t("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[t("b-spinner",{staticStyle:{width:"10rem",height:"10rem","font-size":"52px"}})],1),t("svg",{staticStyle:{width:"90%"},attrs:{fill:"#999999",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M448 80c8.8 0 16 7.2 16 16V415.8l-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3V96c0-8.8 7.2-16 16-16H448zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"}})])]):t("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:e.imageURL},on:{load:e.imageLoaded}})]):e.imageUpload?t("div",[t("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:e.imageUpload}})]):t("div",{staticClass:"w-100 d-flex justify-content-center",staticStyle:{position:"relative"}},[t("svg",{staticStyle:{width:"90%"},attrs:{fill:"#999999",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M448 80c8.8 0 16 7.2 16 16V415.8l-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3V96c0-8.8 7.2-16 16-16H448zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"}})])])]),t("input",{ref:"instrument-image-upload",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.imagePrivew}})],1),t("b-row",[t("b-col",{staticClass:"text-center mt-3",attrs:{sm:"12"}},[t("b-button",{staticClass:"w-50",attrs:{variant:"primary"},on:{click:e.openFileExplorer}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Data")]),t("i",{staticClass:"fa-solid fa-arrow-right"})])],1),t("b-col",{staticClass:"text-center mt-3",attrs:{sm:"12"}},[t("b-button",{staticClass:"w-50",attrs:{variant:"primary"},on:{click:e.openFileExplorer}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Manuals")]),t("i",{staticClass:"fa-solid fa-arrow-right"})])],1)],1),t("b-row",{staticClass:"mt-3"},[t("div",{staticClass:"w-100 text-center"},[t("h3",{staticStyle:{"font-weight":"bold","text-align":"center"}},[e._v("Comment:")])]),"watch"===e.purpose?t("b-textarea",{attrs:{rows:"5",placeholder:"Write a comment...",disabled:""},model:{value:e.instrument.comment,callback:function(t){e.$set(e.instrument,"comment",t)},expression:"instrument.comment"}},[e._v(e._s(e.instrument.comment)+"}")]):t("b-textarea",{attrs:{rows:"5",placeholder:"Write a comment..."},model:{value:e.instrument.comment,callback:function(t){e.$set(e.instrument,"comment",t)},expression:"instrument.comment"}})],1)],1),t("b-col",{attrs:{sm:"8"}},[t("b-row",{staticClass:"pl-5 w-100"},[t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"A-Number"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{attrs:{value:"add"===e.purpose?"Auto generated":e.instrument.aNumber,disabled:""}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.aNumber,callback:function(t){e.$set(e.instrument,"aNumber",t)},expression:"instrument.aNumber"}}):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Name"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{class:{error:e.v$.instrument.instrumentName.$error},model:{value:e.instrument.instrumentName,callback:function(t){e.$set(e.instrument,"instrumentName",t)},expression:"instrument.instrumentName"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{disabled:""},model:{value:e.instrument.instrumentName,callback:function(t){e.$set(e.instrument,"instrumentName",t)},expression:"instrument.instrumentName"}}):e._e(),e.v$.instrument.instrumentName.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.instrumentName.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Manufacturer"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{class:{error:e.v$.instrument.manufacturer.$error},model:{value:e.instrument.manufacturer,callback:function(t){e.$set(e.instrument,"manufacturer",t)},expression:"instrument.manufacturer"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.manufacturer,callback:function(t){e.$set(e.instrument,"manufacturer",t)},expression:"instrument.manufacturer"}}):e._e(),e.v$.instrument.manufacturer.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.manufacturer.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Serial Number"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{attrs:{required:""},model:{value:e.instrument.serialNumber,callback:function(t){e.$set(e.instrument,"serialNumber",t)},expression:"instrument.serialNumber"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.serialNumber,callback:function(t){e.$set(e.instrument,"serialNumber",t)},expression:"instrument.serialNumber"}}):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Type"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{class:{error:e.v$.instrument.type.$error},model:{value:e.instrument.type,callback:function(t){e.$set(e.instrument,"type",t)},expression:"instrument.type"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.type,callback:function(t){e.$set(e.instrument,"type",t)},expression:"instrument.type"}}):e._e(),e.v$.instrument.type.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.type.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Test"}},["add"===e.purpose||"edit"===e.purpose?t("b-select",{class:{error:e.v$.instrument.test.$error},model:{value:e.instrument.test,callback:function(t){e.$set(e.instrument,"test",t)},expression:"instrument.test"}},e._l(e.testTypes,(function(s,r){return t("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(s)+" ")])})),0):e._e(),"watch"===e.purpose?t("b-select",{attrs:{disabled:""},model:{value:e.instrument.test,callback:function(t){e.$set(e.instrument,"test",t)},expression:"instrument.test"}},e._l(e.testTypes,(function(s,r){return t("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(s)+" ")])})),0):e._e(),e.v$.instrument.test.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.test.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Last calibreated"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-datepicker",{class:{error:e.v$.instrument.lastCalibratedDate.$error},on:{input:e.onLastCalibrationDateChange},model:{value:e.instrument.lastCalibratedDate,callback:function(t){e.$set(e.instrument,"lastCalibratedDate",t)},expression:"instrument.lastCalibratedDate"}}):e._e(),"watch"===e.purpose?t("b-form-datepicker",{attrs:{required:"",disabled:""},model:{value:e.instrument.lastCalibratedDate,callback:function(t){e.$set(e.instrument,"lastCalibratedDate",t)},expression:"instrument.lastCalibratedDate"}}):e._e(),e.v$.instrument.lastCalibratedDate.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.lastCalibratedDate.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Next calibration"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-datepicker",{class:{error:e.v$.instrument.nextCalibrationDate.$error},model:{value:e.instrument.nextCalibrationDate,callback:function(t){e.$set(e.instrument,"nextCalibrationDate",t)},expression:"instrument.nextCalibrationDate"}}):e._e(),"watch"===e.purpose?t("b-form-datepicker",{attrs:{required:"",disabled:""},model:{value:e.instrument.nextCalibrationDate,callback:function(t){e.$set(e.instrument,"nextCalibrationDate",t)},expression:"instrument.nextCalibrationDate"}}):e._e(),e.v$.instrument.nextCalibrationDate.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.nextCalibrationDate.$errors[0].$message)+" ")]):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Value"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{attrs:{type:"number"},model:{value:e.instrument.value,callback:function(t){e.$set(e.instrument,"value",t)},expression:"instrument.value"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.value,callback:function(t){e.$set(e.instrument,"value",t)},expression:"instrument.value"}}):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Primary Responsible"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-select",{class:{error:e.v$.instrument.userId.$error},attrs:{options:e.users,"value-field":"id","text-field":"name"},scopedSlots:e._u([{key:"first",fn:function(){return[t("option",{domProps:{value:null}},[e._v("Select primary responsible")])]},proxy:!0}],null,!1,701165607),model:{value:e.instrument.userId,callback:function(t){e.$set(e.instrument,"userId",t)},expression:"instrument.userId"}}):e._e(),"watch"===e.purpose?t("b-form-select",{class:{error:e.v$.instrument.userId.$error},attrs:{options:e.users,"value-field":"id","text-field":"name",disabled:""},scopedSlots:e._u([{key:"first",fn:function(){return[t("option",{domProps:{value:null}},[e._v("None selected")])]},proxy:!0}],null,!1,2275144228),model:{value:e.instrument.userId,callback:function(t){e.$set(e.instrument,"userId",t)},expression:"instrument.userId"}}):e._e(),e.v$.instrument.userId.$error?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(e.v$.instrument.userId.$errors[0].$message)+" ")]):e._e()],1),t("div",{staticClass:"col-sm-6"},[t("b-form-group",{attrs:{label:"External calibrator"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-input",{attrs:{disabled:!e.instrument.externalCalibration},model:{value:e.instrument.externalCalibrator,callback:function(t){e.$set(e.instrument,"externalCalibrator",t)},expression:"instrument.externalCalibrator"}}):e._e(),"watch"===e.purpose?t("b-form-input",{attrs:{required:"",disabled:""},model:{value:e.instrument.externalCalibrator,callback:function(t){e.$set(e.instrument,"externalCalibrator",t)},expression:"instrument.externalCalibrator"}}):e._e()],1)],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Secondary Responsible"}},["add"===e.purpose||"edit"===e.purpose?t("b-form-select",{attrs:{options:e.users,"value-field":"id","text-field":"name"},scopedSlots:e._u([{key:"first",fn:function(){return[t("option",{domProps:{value:null}},[e._v("Select secondary responsible")])]},proxy:!0}],null,!1,2135253969),model:{value:e.instrument.userId2,callback:function(t){e.$set(e.instrument,"userId2",t)},expression:"instrument.userId2"}}):e._e(),"watch"===e.purpose?t("b-form-select",{attrs:{options:e.users,"value-field":"id","text-field":"name",disabled:""},scopedSlots:e._u([{key:"first",fn:function(){return[t("option",{domProps:{value:null}},[e._v("None selected")])]},proxy:!0}],null,!1,2275144228),model:{value:e.instrument.userId2,callback:function(t){e.$set(e.instrument,"userId2",t)},expression:"instrument.userId2"}}):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"External Calibration"}},["add"===e.purpose||"edit"===e.purpose?t("b-checkbox",{attrs:{type:"number",switch:""},model:{value:e.instrument.externalCalibration,callback:function(t){e.$set(e.instrument,"externalCalibration",t)},expression:"instrument.externalCalibration"}}):e._e(),"watch"===e.purpose?t("b-checkbox",{attrs:{disabled:"",switch:""},model:{value:e.instrument.externalCalibration,callback:function(t){e.$set(e.instrument,"externalCalibration",t)},expression:"instrument.externalCalibration"}}):e._e()],1),t("b-form-group",{staticClass:"col-sm-6",attrs:{label:"Needs calibration?"}},["add"===e.purpose||"edit"===e.purpose?t("b-checkbox",{attrs:{type:"number",switch:""},model:{value:e.instrument.needsCalibration,callback:function(t){e.$set(e.instrument,"needsCalibration",t)},expression:"instrument.needsCalibration"}}):e._e(),"watch"===e.purpose?t("b-checkbox",{attrs:{disabled:"",switch:""},model:{value:e.instrument.needsCalibration,callback:function(t){e.$set(e.instrument,"needsCalibration",t)},expression:"instrument.needsCalibration"}}):e._e()],1)],1)],1)],1),t("file-explorer-modal",{ref:"FileExplorer"})],1)},K=[];const J={getAll(){return c.get("/user")},getAllNoPasswords(){return c.get("/user/no-password")},getUserById(e){return c.get(`/user/${e}`)},createUser(e){return c.post("/user",e)},updateUser(e,t){return c.put(`/user/${t}`,e)},deleteUser(e){return c["delete"](`/user/${e}`)}};var Q=s(5795),ee=s(4219),te=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{centered:"",size:"xl"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("h3",[e._v("Gearivize File Explorer")])]},proxy:!0},{key:"modal-footer",fn:function(){return[t("b-button",{on:{click:e.close}},[e._v("Close")])]},proxy:!0}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("b-row",[t("b-col",{staticStyle:{"border-bottom":"1px solid gray","padding-bottom":"10px"},attrs:{sm:"12"}},[t("b-button",[t("i",{staticClass:"fa-solid fa-folder-plus toolbar-icons"})])],1),t("b-col",{staticStyle:{"overflow-x":"visible",display:"flex","border-right":"1px solid gray",padding:"0"},attrs:{sm:"4"}},[t("file-explorer-file-tree",{attrs:{directories:e.getFiles,"show-files":!1,"do-in-tapping":"","selected-directory":e.selectedFolder},on:{"select-directory":e.selectDirectory}})],1),t("b-col",{ref:"fileDrop",attrs:{sm:"8"},on:{dragover:e.fileDragOver,dragleave:e.fileDragLeave,drop:e.fileDrop}},[e.isDragingFile?e._e():t("fil-explorer-browse",{ref:"fileBrowse",attrs:{files:e.files,directory:e.getDirectory},on:{"select-directory":e.selectDirectory,reload:e.reload,"get-directorypath":e.findInstrumentDirectory}})],1)],1)],1)},se=[];const re={getAllFiles(){return c.get("/fileexplorer")},uploadFile(e){return c.post("/fileexplorer/file",e,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})},moveFile(e){return c.put("fileexplorer/move/file",e)},deleteDirOrFile(e){return c["delete"]("/fileexplorer/file-dir",{headers:{Accept:"application/json","Content-Type":"multipart/form-data"},data:e})}};var ae=function(){var e=this,t=e._self._c;return t("div",{class:e.isParent?"responsive":""},e._l(e.directories,(function(s){return t("div",{key:s.directoryName,staticStyle:{display:"flex","flex-wrap":"wrap"}},[t("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:s.directoryName.replace(" ",""),expression:"(directory.directoryName).replace(' ', '')"}],staticClass:"btn btn-block text-left custom-directory-button-styling",staticStyle:{width:"100%","white-space":"nowrap","flex-grow":"1",flex:"100%"},style:e.doInTapping?"padding-left:"+(Number(10)+Number(25*e.inTabbing)).toString()+"px":"",on:{click:function(t){return e.selectDirectory(s)}}},[t("i",{staticClass:"fa-solid fa-folder mr-2"}),e._v(e._s(s.directoryName)+" ")]),s.directories.length>0?[t("b-collapse",{ref:s.directoryName.replace(" ",""),refInFor:!0,attrs:{id:e.isParent?"":s.directoryName.replace(" ",""),visible:e.isParent?e.isParent:e.getVisiblility(s.directoryName)}},[t("file-explorer-file-tree",{attrs:{directories:s.directories,"show-files":e.showFiles,"is-parent":!1,"in-tabbing":e.inTabbing+1,"do-in-tapping":e.doInTapping,"path-prop":e.path},on:{"select-directory":e.selectDirectory}})],1)]:e._e()],2)})),0)},ie=[],ne={name:"FileExplorerFileTree",props:{directories:{type:Array,required:!0},showFiles:{type:Boolean,default:!0},isParent:{type:Boolean,default:!0},inTabbing:{type:Number,default:0},doInTapping:{type:Boolean,default:!1},selectedDirectory:{type:Object,default:null},pathProp:[]},data(){return{path:[],collapseVisible:{},displayCollapse:!1}},methods:{selectDirectory(e){this.$emit("select-directory",e)},findInstrumentDirectory(e){const t=[];function s(r,a){for(const i of r){const r=a.concat(i.directoryName);i.directoryName===e&&t.push({directory:i,path:r}),i.directories.length>0&&s(i.directories,r)}}return s(this.directories,[]),t},isCollapseVisible(e){return this.collapseVisibility[e]||!1}},mounted(){null!==this.selectedDirectory&&(this.path=this.findInstrumentDirectory(this.selectedDirectory.directoryName)[0].path)},computed:{getVisiblility(){return e=>!!this.pathProp.includes(e)}},watch:{selectedDirectory(){this.path=this.findInstrumentDirectory(this.selectedDirectory.directoryName)[0].path}}},oe=ne,le=(0,h.Z)(oe,ae,ie,!1,null,"082a4ccc",null),ce=le.exports,ue=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100",staticStyle:{"z-index":"1",display:"flex","flex-wrap":"wrap","align-items":"flex-start",width:"100%",position:"relative",height:"100%"},on:{click:function(t){e.isContextMenuVisible&&e.disableContextMenu()},dragover:function(t){return e.dragThingOver(t,null)},drop:function(t){return e.dropThing(t)}}},[t("b-row",{staticClass:"w-100"},[t("b-col",{staticClass:"d-flex w-100",attrs:{sm:"12"}},[t("div",{staticStyle:{flex:"1"}},[e._v(" Name ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" Last modified ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" Size ")])]),e._l(e.items,(function(s){return t("button",{staticClass:"col-12 btn btn-block",attrs:{draggable:"true"},on:{click:function(t){e.isContextMenuVisible?e.disableContextMenu():e.onRowSelected(s)},contextmenu:function(t){return e.onRightClick(t,s)},drag:function(t){return e.dragThing(t,s)},dragover:function(t){return t.stopPropagation(),e.dragThingOver(t,s)},dragleave:function(t){return e.dragThingLeave(t)},drop:function(t){return t.stopPropagation(),e.dropThing(t)}}},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"text-left",staticStyle:{flex:"1","white-space":"nowrap"}},["folder"===s.type?t("div",[t("i",{staticClass:"fa-solid fa-folder mr-2"}),e._v(e._s(s.name)+" ")]):"file"===s.type?t("div",[s.name.includes(".pdf")?t("i",{staticClass:"fa-solid fa-file-pdf mr-2"}):e.checkIfImage(s.name)?t("i",{staticClass:"fa-solid fa-file-image mr-2"}):s.name.includes(".txt")?t("i",{staticClass:"fa-solid fa-file-lines mr-2"}):s.name.includes(".docx")?t("i",{staticClass:"fa-solid fa-file-word mr-2"}):s.name.includes(".ods")?t("i",{staticClass:"fa-solid fa-file-excel mr-2"}):t("i",{staticClass:"fa-solid fa-file mr-2"}),e._v(" "+e._s(s.name)+" ")]):e._e()]),t("div",{staticClass:"text-left",staticStyle:{"white-space":"nowrap",flex:"1"}},[e._v(" "+e._s(s.lastModified)+" ")]),t("div",{staticClass:"text-left",staticStyle:{flex:"1","white-space":"nowrap"}},[e._v(" "+e._s(s.size)+" ")])])])}))],2),e.isContextMenuVisible?t("div",{staticStyle:{"z-index":"10",position:"fixed","background-color":"white",border:"1px solid rgb(230,230,230)","min-width":"150px"},style:{top:e.contextMenuTop+"px",left:e.contextMenuLeft+"px"}},[t("button",{staticClass:"btn btn-block text-left context-menu-button",on:{click:function(t){return t.stopPropagation(),e.deleteFile.apply(null,arguments)}}},[t("i",{staticClass:"fa-solid fa-trash-can"}),e._v(" Delete ")])]):e._e()],1)},de=[],me={components:{CommonTable:O},props:{directory:null,selectedDirectory:null,files:[]},data(){return{contextMenuTop:0,contextMenuLeft:0,isContextMenuVisible:!1,rightClickedDirOrFile:null,dataToSend:{myName:"",myPath:[],myType:""},isDragging:!1,moveThing:{thingToMove:null,destinationForThing:null}}},methods:{dragThing(e,t){e.preventDefault(),this.moveThing.thingToMove=t,this.isDragging=!0},dragThingLeave(e){e.preventDefault(),this.moveThing.thingToMove=null},dragThingOver(e,t){e.preventDefault(),t!==this.moveThing.thingToMove&&null!==t&&"folder"===t.type?this.moveThing.destinationForThing=t:this.moveThing.destinationForThing=null},dropThing(e){if(e.preventDefault(),this.isDragging=!1,this.$store.state.isAuthenticated.responsible){if(null!==this.moveThing.destinationForThing){let e=this.findFileDirectory(this.moveThing.thingToMove.name,this.directory.directoryName)[0].path,t=this.findDirectory(this.moveThing.destinationForThing.name)[0].path,s={filePath:e,destinationPath:t,fileName:this.moveThing.thingToMove.name};re.moveFile(s).then((e=>this.$emit("reload"))).catch((e=>console.error(e)))}}else this.$bvModal.msgBoxOk("You are not allowed to perform this action!",{title:"Unauthorized use",size:"sm",buttonSize:"sm",okVariant:"danger",centered:!0})},checkIfImage(e){return e.includes("jpg")||e.includes("jpeg")||e.includes("png")},onRowSelected(e){"folder"===e.type&&this.$emit("select-directory",e.actualObject)},onRightClick(e,t){e.preventDefault(),null!==t&&(this.rightClickedDirOrFile=t,this.contextMenuTop=e.clientY,this.contextMenuLeft=e.clientX,this.isContextMenuVisible=!0)},disableContextMenu(){this.isContextMenuVisible=!1},deleteFile(){if(this.disableContextMenu(),this.$store.state.isAuthenticated.responsible){if("file"===this.rightClickedDirOrFile.type){let e=new FormData;e.append("name",this.rightClickedDirOrFile.actualObject.fileName),e.append("path",this.findFileDirectory(this.rightClickedDirOrFile.name,this.directory.directoryName)[0].path),e.append("type",this.rightClickedDirOrFile.type),re.deleteDirOrFile(e).then((e=>this.$emit("reload"))).catch((e=>console.error(e)))}}else this.$bvModal.msgBoxOk("You are not allowed to perform this action!",{title:"Unauthorized use",size:"sm",buttonSize:"sm",okVariant:"danger",centered:!0})},findFileDirectory(e,t){const s=[];function r(a,i){for(const n of a){const a=i.concat(n.directoryName);null!==n.files.find((t=>t.fileName===e))&&void 0!==n.files.find((t=>t.fileName===e))&&n.directoryName===t&&s.push({directory:n,path:a}),n.directories.length>0&&r(n.directories,a)}}return r(this.files,[]),s},findDirectory(e){const t=[];function s(r,a){for(const i of r){const r=a.concat(i.directoryName);i.directoryName===e&&t.push({directory:i,path:r}),i.directories.length>0&&s(i.directories,r)}}return s(this.files,[]),t}},computed:{items(){let e=[];return null!==this.directory?(this.directory.directories.forEach((t=>{let s=new Date(t.lastModified);const r=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getFullYear()),n=String(s.getHours()).padStart(2,"0"),o=String(s.getMinutes()).padStart(2,"0"),l=`${r}/${a}/${i} ${n}.${o}`;e.push({name:t.directoryName,size:t.size,lastModified:l,type:"folder",actualObject:t})})),this.directory.files.forEach((t=>{let s=new Date(t.lastModified);const r=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getFullYear()),n=String(s.getHours()).padStart(2,"0"),o=String(s.getMinutes()).padStart(2,"0"),l=`${r}/${a}/${i} ${n}.${o}`;e.push({name:t.fileName,size:t.size,lastModified:l,type:"file",actualObject:t})}))):console.log(this.directory),e},fields(){return[{key:"name"},{key:"lastModified"},{key:"size"}]}}},pe=me,he=(0,h.Z)(pe,ue,de,!1,null,"30943f5d",null),fe=he.exports,be={components:{FileExplorerFileTree:ce,FilExplorerBrowse:fe},props:{},data(){return{active:!1,aNumber:"",files:{},selectedFolder:null,directoryTreeToSelectedFolder:null,isDragingFile:!1}},methods:{fileDragOver(e){e.preventDefault(),!e.dataTransfer.files||void 0!==this.$refs.fileBrowse&&this.$refs.fileBrowse.isDragging||(this.isDragingFile=!0,this.$refs.fileDrop.classList.add("file-drop-zone"))},fileDragLeave(e){e.preventDefault(),!e.dataTransfer.files||void 0!==this.$refs.fileBrowse&&this.$refs.fileBrowse.isDragging||(this.isDragingFile=!1,this.$refs.fileDrop.classList.remove("file-drop-zone"))},fileDrop(e){if(e.preventDefault(),this.isDragingFile=!1,this.$refs.fileDrop.classList.remove("file-drop-zone"),this.isDragingFile=!1,this.$refs.fileDrop.classList.remove("file-drop-zone"),this.$store.state.isAuthenticated.responsible){if(e.dataTransfer.files&&(void 0===this.$refs.fileBrowse||!this.$refs.fileBrowse.isDragging)&&e.dataTransfer.files.length>0){let t=new FormData;t.append("file",e.dataTransfer.files[0]),t.append("path",this.findInstrumentDirectory(this.selectedFolder.directoryName)[0].path),re.uploadFile(t).then((e=>this.reload())).catch((e=>this.$bvModal.msgBoxOk("You are not allowed to perform this action!",{title:"Unauthorized use",size:"sm",buttonSize:"sm",okVariant:"danger",centered:!0})))}}else this.$bvModal.msgBoxOk("You are not allowed to perform this action!",{title:"Unauthorized use",size:"sm",buttonSize:"sm",okVariant:"danger",centered:!0})},show(e){this.aNumber=e,this.active=!0,this.directoryTreeToSelectedFolder=this.findInstrumentDirectory(e),this.selectedFolder=this.directoryTreeToSelectedFolder[0].directory},close(){this.active=!1},load(){re.getAllFiles().then((e=>{this.files=e.data,this.selectedFolder=this.files[0]})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},reload(){re.getAllFiles().then((e=>{this.files=e.data,this.selectedFolder=this.findInstrumentDirectory(this.selectedFolder.directoryName)[0].directory})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},selectDirectory(e){this.selectedFolder=e,this.findInstrumentDirectory(e.directoryName)},findInstrumentDirectory(e){const t=[];function s(r,a){for(const i of r){const r=a.concat(i.directoryName);i.directoryName===e&&t.push({directory:i,path:r}),i.directories.length>0&&s(i.directories,r)}}return s(this.files,[]),t}},computed:{getPath(){return this.directoryTreeToSelectedFolder.path},getFiles(){return this.files},getDirectory(){return this.selectedFolder}},mounted(){this.load()}},ge=be,ve=(0,h.Z)(ge,te,se,!1,null,"e4ebd7d4",null),ye=ve.exports,xe=s(5420),we={setup(){return{v$:(0,ee.Xw)()}},components:{FileExplorerModal:ye},props:{},data(){return{loadingImage:!0,active:!1,imageUpload:null,imageURL:null,imageFile:null,purpose:"",testTypes:A,users:[],instruments:[],instrument:{},defaultInstrument:{aNumber:"A0",comment:"",creationTime:new Date,externalCalibration:!1,image:"",inactive:!1,instrumentName:"",externalCalibrator:"",lastCalibratedDate:new Date,manufacturer:"",nextCalibrationDate:new Date((new Date).setFullYear((new Date).getFullYear()+2)).toISOString().slice(0,10),note:"",serialNumber:"",test:0,testTemplateId:null,type:"",userId:null,userId2:null,value:0,needsCalibration:!0}}},validations(){return{instrument:{instrumentName:{required:Q.C1},lastCalibratedDate:{required:Q.C1},manufacturer:{required:Q.C1},nextCalibrationDate:{required:Q.C1},test:{required:Q.C1},type:{required:Q.C1},userId:{required:Q.C1},externalCalibrator:{required:(0,xe.CF)((function(){return this.instrument.externalCalibration}))}}}},methods:{imageLoaded(){URL.revokeObjectURL(this.imageURL)},openFileExplorer(){this.$refs.FileExplorer.show(this.instrument.aNumber)},load(){J.getAllNoPasswords().then((e=>this.users=e.data)).catch((e=>console.error(e)))},show(e,t){const s=(new Date).setFullYear((new Date).getFullYear()+2);new Date(s);this.active=!0,this.purpose=e,this.instrument=null!=t?t:this.defaultInstrument,null!==this.instrument.image&&""!==this.instrument.image&&(this.loadingImage=!0,U.getImage(this.instrument.image).then((e=>{this.imageURL=URL.createObjectURL(e.data),this.loadingImage=!1})).catch((e=>{console.log(e),this.loadingImage=!1})))},hide(){this.v$.$reset(),this.active=!1},addInstrument(){this.v$.$touch(),this.v$.$error?this.v$.$errors.forEach((e=>{e.$message="Required"})):U.createNewInstrument(this.instrument).then((e=>{if(this.instruments.push(e.data),null!==this.imageFile){let t=new FormData;t.append("file",this.imageFile),U.uploadInstrumentImage(t,e.data.aNumber).then((e=>{console.log("Upload success"),this.imageUpload=null,this.hide()})).catch((e=>{console.log(e),this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})}))}else this.imageUpload=null,this.hide()})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},updateInstrument(){this.v$.$touch(),this.v$.$error?this.v$.$errors.forEach((e=>{e.$message="Required"})):U.updateInstrument(this.instrument).then((e=>{if(null!==this.imageFile){let t=new FormData;t.append("file",this.imageFile),U.uploadInstrumentImage(t,e.data.aNumber).then((e=>{console.log("Upload success"),this.imageUpload=null,this.hide()})).catch((e=>{console.log(e),this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})}))}else this.imageUpload=null,this.hide()})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},reactivateInstrument(){this.instrument.inactive=!1,U.activateInstrument(this.instrument).then((e=>this.hide())).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},deleteInstrument(){this.instrument.inactive=!0,U.deleteInstrument(this.instrument.aNumber).then((e=>this.hide())).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},actualDeleteInstrument(){U.actualDeleteInstrument(this.instrument.aNumber).then((e=>this.hide())).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},onLastCalibrationDateChange(){this.instrument.nextCalibrationDate=new Date(new Date(this.instrument.lastCalibratedDate).setFullYear(new Date(this.instrument.lastCalibratedDate).getFullYear()+2)).toISOString().slice(0,10)},browseFileClick(){this.$refs["instrument-image-upload"].click()},imagePrivew(e){this.imageFile=e.target.files[0];const t=new FileReader;t.readAsDataURL(this.imageFile),t.onload=e=>{this.imageUpload=e.target.result}}},computed:{},mounted(){this.load()}},Ce=we,ke=(0,h.Z)(Ce,X,K,!1,null,"1d2db000",null),$e=ke.exports,De={components:{CommonTable:O,InstrumentModal:$e},props:{},data(){return{instruments:[],testTypes:A,filterProperties:[{condition:e=>!0===e.inactive,value:"get_inactive",label:"Inactive"},{condition:e=>!1===e.inactive&&!0===e.needsCalibration,value:"get_active",label:"Active"},{condition:e=>!1===e.needsCalibration,value:"get_need_calibration",label:"No cal."}]}},methods:{getInstruments(){U.getAll().then((e=>{this.instruments=this.sortInstruments(e.data),this.instruments.forEach((e=>{if(e&&e.needsCalibration){const t=new Date,s=new Date(e.nextCalibrationDate).getTime()-t.getTime(),r=Math.ceil(s/864e5);e["daysLeft"]=r}else e["daysLeft"]="-";e["testType"]=A[e.test]}))})).catch((e=>console.log(e)))},sortInstruments(e){return e.sort((function(e,t){const s=parseInt(e.aNumber.match(/\d+/)[0]),r=parseInt(t.aNumber.match(/\d+/)[0]);return s===r?e.aNumber.localeCompare(t.aNumber,void 0,{numeric:!0,sensitivity:"base"}):s-r}))}},computed:{fields(){return[{key:"aNumber",sortable:!0},{key:"instrumentName",sortable:!0},{key:"manufacturer",sortable:!0},{key:"type",sortable:!0},{key:"testType",label:"Test",sortable:!0},{key:"daysLeft",sortable:!0},{key:"value",sortable:!0},{key:"actions",label:"",template:{head:[{icon:"fa-plus",text:"New instrument",placement:"right",section:"table",visible:this.$store.state.isAuthenticated.responsible,variant:"success",size:"sm",action:()=>this.$refs["InstrumentModal"].show("add",null)}],cell:[{icon:"fa-eye",placement:"right",variant:"primary",visible:!0,size:"sm",action:e=>this.$refs["InstrumentModal"].show("watch",e)},{icon:"fa-pen-to-square",placement:"right",variant:"success",visible:this.$store.state.isAuthenticated.responsible,size:"sm",action:e=>this.$refs["InstrumentModal"].show("edit",e)}]}}]}},mounted(){this.getInstruments()}},_e=De,Se=(0,h.Z)(_e,W,G,!1,null,null,null),Ie=Se.exports,ze=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-start",attrs:{fluid:""}},[t("h1",[e._v("Templates")])])},Ne=[],Fe={components:{},props:{},data(){return{}},methods:{},computed:{},mounted(){}},Me=Fe,Te=(0,h.Z)(Me,ze,Ne,!1,null,null,null),Pe=Te.exports,Oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("form",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"username"}},[e._v("Username")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[e._v("Login")])])])},Ue=[],Ae={components:{},props:{},data(){return{username:"",password:""}},methods:{login(){u.login(this.username,this.password).then((e=>{console.log(e),this.$router.push({name:"Dashboard"})})).catch((e=>console.log(e)))}},computed:{},mounted(){}},Be=Ae,Ve=(0,h.Z)(Be,Oe,Ue,!1,null,null,null),Ee=Ve.exports,Le=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-start",attrs:{fluid:""}},[t("h1",[e._v("Settings")])])},He=[],Re={components:{},props:{},data(){return{}},methods:{},computed:{},mounted(){}},qe=Re,je=(0,h.Z)(qe,Le,He,!1,null,null,null),Ze=je.exports,Ye=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"text-left mt-5"},[t("b-list-group",[t("b-list-group-item",{staticStyle:{"background-color":"rgb(240,240,240)"}},[t("h1",{staticClass:"m-0",staticStyle:{"font-size":"24px"}},[e._v("Super user")])]),t("b-list-group-item",{staticClass:"super-user-hover",attrs:{to:"/users"}},[e._v("Users")]),t("b-list-group-item",{staticClass:"super-user-hover",attrs:{to:"/import"}},[e._v("Import")])],1)],1)},We=[],Ge=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{centered:"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("div",{staticClass:"text-right w-100 d-flex flex-row justify-content-between"},[t("h4",[e._v("User")]),"watch"!==e.purpose?t("b-button",{attrs:{variant:"danger"},on:{click:e.deleteUser}},[t("span",{staticStyle:{"margin-right":"7px"}},[e._v("Delete")]),t("i",{staticClass:"fa-solid fa-trash"})]):e._e()],1)]},proxy:!0},{key:"modal-footer",fn:function(){return["edit"===e.purpose?t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.close}},[e._v("Cancel")]),t("b-button",{attrs:{variant:"success",type:"submit"},on:{click:e.submit}},[e._v("Update")])],1):"watch"===e.purpose?t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.close}},[e._v("Close")])],1):e._e()]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("b-row",[t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Name"}},["edit"===e.purpose?t("b-form-input",{class:{error:e.v$.user.name.$error},attrs:{vuelidate:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}):"watch"===e.purpose?t("b-form-input",{class:{error:e.v$.user.name.$error},attrs:{disabled:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}):e._e(),t("vuelidate",{attrs:{"v-model":e.v$.user.name}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"E-mail"}},["edit"===e.purpose?t("b-form-input",{class:{error:e.v$.user.email.$error},attrs:{vuelidate:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}):"watch"===e.purpose?t("b-form-input",{attrs:{disabled:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}):e._e(),t("vuelidate",{attrs:{"v-model":e.v$.user.email}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Responsible"}},["edit"===e.purpose?t("b-checkbox",{attrs:{switch:""},model:{value:e.user.responsible,callback:function(t){e.$set(e.user,"responsible",t)},expression:"user.responsible"}}):"watch"===e.purpose?t("b-checkbox",{attrs:{switch:"",disabled:""},model:{value:e.user.responsible,callback:function(t){e.$set(e.user,"responsible",t)},expression:"user.responsible"}}):e._e()],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Super user"}},["edit"===e.purpose?t("b-checkbox",{attrs:{switch:""},model:{value:e.user.superUser,callback:function(t){e.$set(e.user,"superUser",t)},expression:"user.superUser"}}):"watch"===e.purpose?t("b-checkbox",{attrs:{switch:"",disabled:""},model:{value:e.user.superUser,callback:function(t){e.$set(e.user,"superUser",t)},expression:"user.superUser"}}):e._e()],1)],1)],1)],1)},Xe=[],Ke=function(){var e=this,t=e._self._c;return e.vModel.$error?t("span",{staticClass:"error-text"},[e._v(e._s(""===e.vModel.$errors[0].$message?e.message:e.vModel.$errors[0].$message))]):e._e()},Je=[],Qe={props:{vModel:null,message:{type:String,default:()=>"Required"}},methods:{getComponents(){const e=this.$parent.$children;console.log(e),e.forEach((e=>{null!==e.$attrs.vuelidate&&(e.$el.className="form-control error-field")}))}},watch:{},mounted(){}},et=Qe,tt=(0,h.Z)(et,Ke,Je,!1,null,"2094d42b",null),st=tt.exports,rt={setup(){return{v$:(0,ee.Xw)()}},components:{Vuelidate:st},props:{},data(){return{visible:!1,purpose:"watch",user:{type:Object,default:()=>{}},defaultUser:{id:"2d210a74-419d-4705-a1ec-820274894c6b",name:"",email:"",password:"",responsible:!1,superUser:!1,createDate:(new Date).toISOString()},repeatPassword:""}},validations(){return{user:{name:{required:Q.C1},email:{required:Q.C1,email:xe.Do}}}},methods:{show(e,t){this.purpose=e,this.visible=!0,this.user=null!=t?t:this.defaultUser,this.repeatPassword=this.user.password},close(){this.visible=!1,this.v$.$reset()},deleteUser(){this.$bvModal.msgBoxConfirm(`Are you sure you want to delete ${this.user.name}? It cannot be undone!`,{title:"Delete user",size:"sm",buttonSize:"sm",okVariant:"danger",centered:!0}).then((e=>{!0===e?J.deleteUser(this.user.id).then((e=>{this.$emit("delete-user",e.data),this.close()})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0}))):console.log("cancel deletion")}))},submit(){this.v$.$touch(),0===this.v$.$errors.length?(this.createDate=(new Date).toISOString(),J.updateUser(this.user,this.user.id).then((e=>{this.user=e.data,this.close()})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))):console.log(this.v$.$errors)}},computed:{},watch:{"this.v$.user.name.$errors"(){console.log("ting")}},mounted(){}},at=rt,it=(0,h.Z)(at,Ge,Xe,!1,null,null,null),nt=it.exports,ot=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{centered:"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("div",{staticClass:"text-right w-100 d-flex flex-row justify-content-between"},[t("h4",[e._v("User")])])]},proxy:!0},{key:"modal-footer",fn:function(){return[t("div",[t("b-button",{staticStyle:{"margin-right":"10px"},attrs:{variant:"secondary"},on:{click:e.close}},[e._v("Cancel")]),t("b-button",{attrs:{variant:"success"},on:{click:e.submit}},[e._v("Add")])],1)]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("b-row",[t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Name"}},[t("b-form-input",{class:{error:e.v$.user.name.$error},attrs:{vuelidate:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),t("vuelidate",{attrs:{"v-model":e.v$.user.name}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"E-mail"}},[t("b-form-input",{class:{error:e.v$.user.email.$error},attrs:{vuelidate:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),t("vuelidate",{attrs:{"v-model":e.v$.user.email}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Password"}},[t("b-form-input",{class:{error:e.v$.user.password.$error},attrs:{vuelidate:"",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),t("vuelidate",{attrs:{"v-model":e.v$.user.password}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Repeat Password"}},[t("b-form-input",{class:{error:e.v$.repeatPassword.$error},attrs:{vuelidate:"",type:"password"},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}}),t("vuelidate",{attrs:{"v-model":e.v$.repeatPassword,message:"Passwords not identical"}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Responsible"}},[t("b-checkbox",{attrs:{switch:""},model:{value:e.user.responsible,callback:function(t){e.$set(e.user,"responsible",t)},expression:"user.responsible"}})],1)],1),t("b-col",{attrs:{sm:"6"}},[t("b-form-group",{attrs:{label:"Super user"}},[t("b-checkbox",{attrs:{switch:""},model:{value:e.user.superUser,callback:function(t){e.$set(e.user,"superUser",t)},expression:"user.superUser"}})],1)],1)],1)],1)},lt=[],ct={setup(){return{v$:(0,ee.Xw)()}},components:{Vuelidate:st},props:{},data(){return{visible:!1,user:{type:Object,default:()=>{}},defaultUser:{id:"2d210a74-419d-4705-a1ec-820274894c6b",name:"",email:"",password:"",responsible:!1,superUser:!1,createDate:(new Date).toISOString()},repeatPassword:""}},validations(){return{user:{name:{required:Q.C1},email:{required:Q.C1,email:xe.Do},password:{required:Q.C1}},repeatPassword:{required:(0,xe.CF)((function(){return!1})),sameAsPassword:(0,Q.sH)((function(){return this.user.password}))}}},methods:{show(){this.visible=!0},close(){this.visible=!1,this.v$.$reset(),console.log("Close")},submit(){this.v$.$touch(),0===this.v$.$errors.length?J.createUser(this.user).then((e=>{this.$emit("add-user",e.data),this.close()})).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0}))):console.log(this.v$.$errors)}},computed:{},watch:{"this.v$.user.name.$errors"(){console.log("ting")}},mounted(){}},ut=ct,dt=(0,h.Z)(ut,ot,lt,!1,null,null,null),mt=dt.exports,pt=function(){var e=this,t=e._self._c;return t("div")},ht=[],ft={props:{minimumRequirement:{type:String,default:""}},computed:{store(){return this.$store.state.isChecking}},watch:{"$store.state.isChecking":function(e,t){this.$store.state.isChecking||(this.$store.state.isAuthenticated!=={}||null!==this.$store.state.isAuthenticated?(""===this.minimumRequirement&&this.$router.push("/"),this.$store.state.isAuthenticated[this.minimumRequirement]||this.$router.push("/"),this.$store.state.isAuthenticated||this.$router.push("/")):this.$router.push("/"))}}},bt=ft,gt=(0,h.Z)(bt,pt,ht,!1,null,null,null),vt=gt.exports,yt={components:{UserModal:nt,CommonTable:O,CreateUserModal:mt,Authenticator:vt},props:{},data(){return{users:[]}},methods:{load(){J.getAll().then((e=>this.users=e.data)).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},deleteUser(e){let t=null;this.users.forEach((s=>{s.id===e.id&&(t=s)})),this.users=this.users.filter((e=>e!==t))},addUser(e){this.users.push(e)}},computed:{fields(){return[{key:"name"},{key:"email"},{key:"responsible"},{key:"superUser"},{key:"actions",label:"",template:{head:[{icon:"fa-plus",text:"New instrument",placement:"right",section:"table",visible:!0,variant:"success",size:"sm",action:()=>this.$refs["CreateUserModal"].show()}],cell:[{icon:"fa-eye",placement:"right",variant:"primary",visible:!0,size:"sm",action:e=>this.$refs["UserModal"].show("watch",e,null)},{icon:"fa-pen-to-square",placement:"right",variant:"success",visible:!0,size:"sm",action:e=>this.$refs["UserModal"].show("edit",e,null)}]}}]}},mounted(){this.load()},watch:{users(){console.log(this.users)}}},xt=yt,wt=(0,h.Z)(xt,Ye,We,!1,null,null,null),Ct=wt.exports,kt=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75",attrs:{fluid:""}},[t("h1",[e._v("Notifications")]),t("common-table",{attrs:{items:e.items,fields:e.fields}})],1)},$t=[],Dt={components:{CommonTable:O},props:{},data(){return{items:[],instrumenter:[]}},methods:{load(){d.getAll().then((e=>{this.items=e.data,console.log(e.data)})).catch((e=>console.error(e))),U.getAll().then((e=>{this.instrumenter=e.data})).catch((e=>console.error(e)))},react(e){e.hasReacted=!0,d.updateNotification(e).then((e=>console.log("sucess"))).catch((e=>console.error(e)))}},computed:{fields(){return[{key:"aNumber"},{key:"hasReacted"},{key:"creationDate"},{key:"nextCalibrationDate",formatter:e=>{if(null!==e){let t=this.instrumenter.find((t=>t.aNumber===e.aNumber)),s=new Date(t.nextCalibrationDate),r=`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}`;return r}return""}},{key:"actions",label:"React",template:{cell:[{icon:"fa-check",size:"sm",placement:"right",visible:this.$store.state.isAuthenticated.responsible,variant:"success",action:e=>this.react(e)}]}}]}},mounted(){this.load()}},_t=Dt,St=(0,h.Z)(_t,kt,$t,!1,null,null,null),It=St.exports,zt=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-left",attrs:{fluid:""}},[t("authenticator",{attrs:{"minimum-requirement":"superUser"}}),t("b-row",[t("b-col",{attrs:{sm:"12"}},[t("h1",{staticStyle:{margin:"25px 0px"}},[e._v("Super user")]),t("hr")]),t("b-col",{attrs:{sm:"12"}},[t("h3",[e._v("Users")])]),t("b-col",{attrs:{sm:"12"}},[t("common-table",{attrs:{items:e.users,fields:e.fields}})],1)],1),t("user-modal",{ref:"UserModal",on:{"delete-user":e.deleteUser}}),t("create-user-modal",{ref:"CreateUserModal",on:{"add-user":e.addUser}})],1)},Nt=[],Ft={components:{UserModal:nt,CommonTable:O,CreateUserModal:mt,Authenticator:vt},props:{},data(){return{users:[]}},methods:{load(){J.getAll().then((e=>this.users=e.data)).catch((e=>this.$bvModal.msgBoxOk(e.status,{title:"Error",size:"sm",buttonSize:"sm",okVariant:"success",centered:!0})))},deleteUser(e){let t=null;this.users.forEach((s=>{s.id===e.id&&(t=s)})),this.users=this.users.filter((e=>e!==t))},addUser(e){this.users.push(e)}},computed:{fields(){return[{key:"name"},{key:"email"},{key:"responsible"},{key:"superUser"},{key:"actions",label:"",template:{head:[{icon:"fa-plus",text:"New instrument",placement:"right",section:"table",visible:!0,variant:"success",size:"sm",action:()=>this.$refs["CreateUserModal"].show()}],cell:[{icon:"fa-eye",placement:"right",variant:"primary",visible:!0,size:"sm",action:e=>this.$refs["UserModal"].show("watch",e,null)},{icon:"fa-pen-to-square",placement:"right",variant:"success",visible:!0,size:"sm",action:e=>this.$refs["UserModal"].show("edit",e,null)}]}}]}},mounted(){this.load()},watch:{users(){console.log(this.users)}}},Mt=Ft,Tt=(0,h.Z)(Mt,zt,Nt,!1,null,null,null),Pt=Tt.exports,Ot=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"w-75 text-left mt-5"},[t("b-row",[t("b-col",{staticClass:"text-right",attrs:{sm:"5"}},[t("svg",{staticStyle:{width:"50%"},attrs:{fill:"rgb(140,140,140)",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M64 256V160H224v96H64zm0 64H224v96H64V320zm224 96V320H448v96H288zM448 256H288V160H448v96zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"}})])]),t("b-col",{staticClass:"text-center d-flex justify-content-center",attrs:{sm:"2"}},[t("svg",{staticStyle:{width:"50%"},attrs:{fill:"rgb(140,140,140)",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"}})])]),t("b-col",{staticClass:"text-left",attrs:{sm:"5"}},[t("svg",{staticStyle:{width:"60%"},attrs:{fill:"rgb(140,140,140)",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"}},[t("path",{attrs:{d:"M256 64H384v64H256V64zM240 0c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48h48v32H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96v32H80c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H240c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H192V288H448v32H400c-26.5 0-48 21.5-48 48v96c0 26.5 21.5 48 48 48H560c26.5 0 48-21.5 48-48V368c0-26.5-21.5-48-48-48H512V288h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V192h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H240zM96 448V384H224v64H96zm320-64H544v64H416V384z"}})])]),t("b-col",{staticClass:"text-center mt-5",attrs:{sm:"12"}},[t("b-button",{staticStyle:{"font-size":"20px"},attrs:{variant:"primary"},on:{click:e.importInstruments}},[e._v(" Import instruments ")])],1)],1),t("input",{ref:"InstrumentImportInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".xlsx, .xls, .xlsb"},on:{change:e.selectedFile}}),t("import-instruments-modal",{ref:"ImportErrorModal"})],1)},Ut=[];const At={importInstruments(e){return c.post("/import/instruments",e,{headers:{"Content-Type":"multipart/form-data"}})}};var Bt=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{size:"lg"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e.errors.length>0?t("div",[t("div",{staticClass:"p-2 m-0",staticStyle:{"background-color":"rgb(240,240,240)",border:"1px solid rgb(200,200,200)","border-radius":"5px"}},e._l(e.errors,(function(s){return t("p",{staticStyle:{"font-size":"12px",color:"red",margin:"0"}},[e._v(e._s(s))])})),0),t("p",{staticClass:"mt-2",staticStyle:{"font-size":"12px",color:"red"}},[e._v("No instruments was imported")])]):t("p",{staticStyle:{"font-size":"12px"}},[e._v("Everthing imported successfully")])])},Vt=[],Et={components:{},props:{},data(){return{active:!1,errors:[]}},methods:{show(e){this.active=!0,this.errors=e},close(){this.active=!1}},computed:{},mounted(){}},Lt=Et,Ht=(0,h.Z)(Lt,Bt,Vt,!1,null,null,null),Rt=Ht.exports,qt={components:{ImportInstrumentsModal:Rt},props:{},data(){return{}},methods:{importInstruments(){this.$refs["InstrumentImportInput"].click()},selectedFile(e){let t=e.target.files[0],s=new FormData;s.append("file",t),At.importInstruments(s).then((e=>{e.data.length>0&&this.$refs["ImportErrorModal"].show(e.data)})).catch((e=>console.log(e)))}},computed:{}},jt=qt,Zt=(0,h.Z)(jt,Ot,Ut,!1,null,null,null),Yt=Zt.exports;r["default"].use(v.ZP);const Wt=[{path:"/",name:"Dashboard",component:Y},{path:"/instruments",name:"Instruments",component:Ie},{path:"/templates",name:"Templates",component:Pe},{path:"/signin",name:"Signin",component:Ee},{path:"/settings",name:"Settings",component:Ze},{path:"/super-user",name:"Super user",component:Ct},{path:"/notifications",name:"Notification Panel",component:It},{path:"/users",name:"Users",component:Pt},{path:"/import",name:"Import",component:Yt}],Gt=new v.ZP({mode:"history",base:"/",routes:Wt});Gt.beforeEach(((e,t,s)=>{y.dispatch("checkAuthentication").then((()=>s())).catch((()=>s()))}));var Xt=Gt,Kt=s(6681),Jt=s(9425),Qt=s(4951);r["default"].use(D()),r["default"].component("apexchart",D()),r["default"].use(Kt.XG7),r["default"].use(Jt.A7),r["default"].use(Qt.ZP),r["default"].config.productionTip=!1,new r["default"]({router:Xt,store:y,render:e=>e(b)}).$mount("#app")}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,i){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],i=e[u][2];for(var o=!0,l=0;l<r.length;l++)(!1&i||n>=i)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(o=!1,i<n&&(n=i));if(o){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,a,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,n=r[0],o=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var u=l(s)}for(t&&t(r);c<n.length;c++)i=n[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},r=self["webpackChunkwebapp"]=self["webpackChunkwebapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3767)}));r=s.O(r)})();
//# sourceMappingURL=app.f5717854.js.map